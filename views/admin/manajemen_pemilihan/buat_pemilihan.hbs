<div class="w-full max-w-[1200px] mx-auto p-4">
  <!-- Header -->
  <h1 class="text-2xl font-bold mb-6">Buat Pemilihan Baru</h1>

  <!-- Form Card -->
  <div class="bg-white rounded-xl border p-6">
    <form id="buatPemilihanForm" action="/admin/manajemen_pemilihan/buat" method="POST" onsubmit="showSuccessPopup(event)">
      <!-- Nama Pemilihan -->
      <div class="mb-4">
        <label for="namaPemilihan" class="block text-sm font-medium mb-2">Nama Pemilihan</label>
        <input
          type="text"
          id="namaPemilihan"
          name="namaPemilihan"
          class="py-3 px-4 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500"
          placeholder="Contoh : Pemilihan Pegawai Terbaik Triwulan 1 2024"
          required
        >
      </div>

      <!-- Tahun -->
      <div class="mb-4">
        <label for="tahun" class="block text-sm font-medium mb-2">Tahun</label>
        <select
          id="tahun"
          name="tahun"
          class="py-3 px-4 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 placeholder-gray-400"
          required
        >
          <option value="" selected disabled>Pilih Tahun</option>
          <option value="2024">2024</option>
          <option value="2025">2025</option>
        </select>
      </div>

      <!-- Periode -->
      <div class="mb-4">
        <label for="periode" class="block text-sm font-medium mb-2">Periode</label>
        <select
          id="periode"
          name="periode"
          class="py-3 px-4 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 placeholder-gray-400"
          required
        >
          <option value="" selected disabled>Pilih Periode</option>
          <option value="Semester 1">Semester 1</option>
          <option value="Semester 2">Semester 2</option>
          <option value="Triwulan 1">Triwulan 1</option>
          <option value="Triwulan 2">Triwulan 2</option>
          <option value="Triwulan 3">Triwulan 3</option>
          <option value="Triwulan 4">Triwulan 4</option>
        </select>
      </div>

      <!-- Tanggal Mulai -->
      <div class="mb-6">
        <label for="tanggalMulai" class="block text-sm font-medium mb-2">Tanggal Mulai</label>
        <input
          type="date"
          id="tanggalMulai"
          name="tanggalMulai"
          class="py-3 px-4 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 placeholder-gray-400"
          placeholder="dd/mm/yyyy"
          required
        >
      </div>

      <!-- Form Actions -->
      <div class="flex justify-end gap-3">
        <button
          type="button"
          onclick="window.location.href='/admin/manajemen_pemilihan'"
          class="py-2 px-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-gray-200 text-gray-500 hover:border-gray-300 hover:text-gray-600 disabled:opacity-50 disabled:pointer-events-none"
        >
          Batal
        </button>
        <button
          type="submit"
          class="py-2 px-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-black text-white hover:bg-gray-800 disabled:opacity-50 disabled:pointer-events-none"
        >
          Buat Pemilihan
        </button>
      </div>
    </form>
  </div>

  <!-- Success Popup -->
  <div id="successPopup" class="fixed inset-0 flex items-center justify-center z-50 hidden">
    <div class="fixed inset-0 bg-black bg-opacity-50"></div>
    <div class="relative bg-white rounded-lg p-8 flex flex-col items-center max-w-sm mx-4">
      <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mb-4">
        <svg class="w-8 h-8 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
          <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h2 class="text-xl font-semibold mb-2 text-center">Pemilihan Berhasil Dibuat</h2>
      <button
        onclick="closePopupAndRedirect()"
        class="mt-4 py-2 px-8 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700"
      >
        OKE
      </button>
    </div>
  </div>
</div>

<script>
function showSuccessPopup(event) {
  event.preventDefault(); // Prevent form submission for demo
  const form = document.getElementById('buatPemilihanForm');
  const popup = document.getElementById('successPopup');
  
  // Check if form is valid
  if (form.checkValidity()) {
    // Show popup
    popup.classList.remove('hidden');
    
    // You would typically submit the form data here
    // const formData = new FormData(form);
    // await fetch('/api/create-election', { method: 'POST', body: formData });
  }
}

function closePopupAndRedirect() {
  const popup = document.getElementById('successPopup');
  popup.classList.add('hidden');
  
  // Redirect to the election management page
  window.location.href = '/admin/manajemen_pemilihan';
}
</script>